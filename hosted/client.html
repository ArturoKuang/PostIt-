<!DOCTYPE html>
<html lang="en">

<head>
    <title>Blog</title>
    <link rel="stylesheet" type="text/css" href="/style.css">
    <link href="https://cdn.quilljs.com/1.0.0/quill.snow.css" rel="stylesheet">
    <script src="https://unpkg.com/web-animations-js@2.3.1/web-animations.min.js"></script>
    <script src="https://unpkg.com/hammerjs@2.0.8/hammer.min.js"></script>
    <script src="https://unpkg.com/muuri@0.7.1/dist/muuri.min.js"></script>
    <script src="bundle.js"> </script>
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
</head>

<body>
    <section id="top">
    </section>
    <section id="content">
        <form id="titleForm">
            <label for="title">Title: </label>
            <input id="titleField" type="text" name="name" />
        </form>
        <div id="editor">
            <p>Tell you story.</p>
        </div>
        <button id="save">Save</button>
        <div class="grid-field">
            <div class="actions">
                <span class="search">
                    <input class="inputSearch" type="text" name="search" placeholder="Search...">
                </span>
                <span class="sort">
                    <select class="sortOptions">
                        <option value="recent" selected> Recent</option>
                        <option value="title">Title</option>
                    </select>
                </span>
                <span class="update">
                    <button class="updateButton">Update List</button>
                </span>

            </div>
            <div class="grid">
                <div class="item">
                    <div class="item-content">2</div>
                </div>
                <div class="item">
                    <div class="item-content">4</div>
                </div>
                <div class="item">
                    <div class="item-content">19</div>
                </div>
                <div class="item">
                    <div class="item-content">1</div>
                </div>
                <div class="item">
                    <div class="item-content">5</div>
                </div>
            </div>
        </div>
        <script>
            var quill = new Quill('#editor', {
                theme: 'snow'
            });

            $('#save').click(function (e) {
                window.delta = quill.getContents();
                const titleField = document.querySelector('#titleField');

                const xhr = new XMLHttpRequest();
                xhr.open('POST', '/addPost');
                xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
                xhr.setRequestHeader('Accept', 'application/json');
                xhr.onload = () => handleResponse(xhr, true);

                // const data = {
                //     title: titleField.value,
                //     data: window.delta
                // };

                const data = `title=${titleField.value}&data=${JSON.stringify(window.delta)}`;
                //const postData = JSON.stringify(data);
                xhr.send(data);
                e.preventDefault();
                return false;
            });
        </script>

    </section>
</body>

</html>